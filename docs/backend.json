
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account in the Delhi Estate Luxe application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "fullName": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The user's phone number."
        },
        "category": {
          "type": "string",
          "description": "The category of the user.",
          "enum": ["listing-property", "real-estate-agent", "interior-designer"]
        },
        "dateJoined": {
          "type": "string",
          "description": "The date and time the user joined the platform.",
          "format": "date-time"
        },
        "wishlist": {
          "type": "array",
          "description": "A list of property IDs that the user has added to their wishlist.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "fullName",
        "email",
        "phone",
        "category",
        "dateJoined"
      ]
    },
    "Property": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Property",
      "type": "object",
      "description": "Represents a property listed on the Delhi Estate Luxe application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the property entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Property)"
        },
        "title": {
          "type": "string",
          "description": "The title of the property listing."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the property."
        },
        "price": {
          "type": "number",
          "description": "The price of the property."
        },
        "listingType": {
          "type": "string",
          "description": "Whether the property is for sale or for rent.",
          "enum": ["sale", "rent"]
        },
        "location": {
          "type": "object",
          "description": "The structured address of the property.",
          "properties": {
            "address": {
              "type": "string",
              "description": "Street address."
            },
            "pincode": {
              "type": "string",
              "description": "Postal code."
            },
            "state": {
              "type": "string",
              "description": "State or province."
            }
          },
          "required": ["address", "pincode", "state"]
        },
         "contactNumber": {
          "type": "string",
          "description": "The contact phone number for the listing."
        },
        "whatsappNumber": {
          "type": "string",
          "description": "The WhatsApp number for the listing."
        },
        "propertyType": {
          "type": "string",
          "description": "The type of property (e.g., apartment, house, villa)."
        },
        "bedrooms": {
          "type": "number",
          "description": "The number of bedrooms in the property."
        },
        "bathrooms": {
          "type": "number",
          "description": "The number of bathrooms in the property."
        },
        "squareYards": {
          "type": "number",
          "description": "The area of the property in square yards."
        },
        "amenities": {
          "type": "array",
          "description": "A list of amenities offered by the property.",
          "items": {
            "type": "string"
          }
        },
        "imageUrls": {
          "type": "array",
          "description": "A list of URLs pointing to images of the property.",
          "items": {
            "type": "string"
          }
        },
        "isFeatured": {
          "type": "boolean",
          "description": "Indicates whether the property is featured."
        },
        "dateListed": {
          "type": "string",
          "description": "The date the property was listed.",
          "format": "date-time"
        },
        "furnishing": {
            "type": "string",
            "description": "The furnishing status of the property.",
            "enum": ["unfurnished", "semi-furnished", "fully-furnished"]
        },
        "overlooking": {
            "type": "string",
            "description": "What the property overlooks (e.g., Pool, Garden, Main Road)."
        },
        "ageOfConstruction": {
            "type": "string",
            "description": "The age of the property's construction (e.g., 0-1 year, 1-5 years)."
        }
      },
      "required": [
        "id",
        "userId",
        "title",
        "description",
        "price",
        "listingType",
        "location",
        "contactNumber",
        "whatsappNumber",
        "propertyType",
        "bedrooms",
        "bathrooms",
        "squareYards",
        "dateListed"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Only the authenticated user can read/write their own profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/properties/{propertyId}",
        "definition": {
            "entityName": "Property",
            "schema": {
                "$ref": "#/backend/entities/Property"
            },
            "description": "Public collection of all property listings. Anyone can read, but only the property owner can modify their own listings.",
            "params": [
                {
                    "name": "propertyId",
                    "description": "The unique identifier for the property."
                }
            ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed for a public property marketplace. User profiles are private, stored under '/users/{userId}'. Properties are stored in a top-level '/properties' collection, making them publicly readable for listings. Security rules ensure that while anyone can view properties, only the authenticated owner (verified via the 'userId' field in the property document) can create, update, or delete their own listings. The User entity now includes a `wishlist` array to store property IDs, and rules allow users to modify their own wishlist. This separation maintains user privacy while allowing for a public, searchable property database with personalized features."
  }
}

    